function qtranxj_get_cookie(n){for(var e=document.cookie.split(";"),a=0;a<e.length;++a){var t=e[a],i=t.split("=");if(i[0].trim()==n&&!(e.length<2))return i[1].trim()}return""}function qtranxj_ce(n,e,a,t){var i=document.createElement(n);if(e)for(prop in e)i[prop]=e[prop];return a&&(t&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i)),i}function qtranxj_LanguageSwitch(n){function e(){var n=this;if(!n.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(qTranslateConfig.activeLanguage!==n.lang){if(qTranslateConfig.activeLanguage){for(var e=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],a=0;a<e.length;++a)e[a].classList.remove(qTranslateConfig.lsb_style_active_class);for(var t=qTranslateConfig.onTabSwitchFunctionsSave,a=0;a<t.length;++a)t[a].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,n.lang)}var i=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=n.lang;for(var e=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],a=0;a<e.length;++a)e[a].classList.add(qTranslateConfig.lsb_style_active_class);for(var o=qTranslateConfig.onTabSwitchFunctions,a=0;a<o.length;++a)o[a].call(qTranslateConfig.qtx,n.lang,i);for(var r=qTranslateConfig.onTabSwitchFunctionsLoad,a=0;a<r.length;++a)r[a].call(qTranslateConfig.qtx,n.lang,i)}}var a=qTranslateConfig.language_config;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var t in a){var i=a[t],o=qTranslateConfig.flag_location,r=qtranxj_ce("li",{lang:t,className:"qtranxs-lang-switch",onclick:e},n);qtranxj_ce("img",{src:o+i.flag},r),qtranxj_ce("span",{innerHTML:i.name},r),qTranslateConfig.activeLanguage==t&&r.classList.add(qTranslateConfig.lsb_style_active_class),qTranslateConfig.tabSwitches[t]||(qTranslateConfig.tabSwitches[t]=[]),qTranslateConfig.tabSwitches[t].push(r)}}qtranxj_get_split_blocks=function(n){var e=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\])/gi;return n.xsplit(e)},qtranxj_split=function(n){var e=qtranxj_get_split_blocks(n);return qtranxj_split_blocks(e)},qtranxj_split_blocks=function(n){var e=new Object;for(var a in qTranslateConfig.language_config)e[a]="";if(!n||!n.length)return e;if(1==n.length){var t=n[0];for(var a in qTranslateConfig.language_config)e[a]+=t;return e}for(var i,o=/<!--:([a-z]{2})-->/gi,r=/\[:([a-z]{2})\]/gi,a=!1,s=0;s<n.length;++s){var t=n[s];if(t.length)if(i=o.exec(t),o.lastIndex=0,null==i)if(i=r.exec(t),r.lastIndex=0,null==i)if("<!--:-->"!=t&&"[:]"!=t)if(a)e[a]+=t,a=!1;else for(var l in e)e[l]+=t;else a=!1;else a=i[1];else a=i[1]}return e},String.prototype.xsplit=function(n){if(3==="a~b".split(/(~)/).length)return this.split(n);n.global||(n=new RegExp(n.source,"g"+(n.ignoreCase?"i":"")));for(var e,a=0,t=[];null!=(e=n.exec(this));)t.push(this.slice(a,e.index)),e.length>1&&t.push(e[1]),a=n.lastIndex;return a<this.length&&t.push(this.slice(a)),a==this.length&&t.push(""),t};var qTranslateX=function(n){this.ge=function(n){return document.getElementById(n)},this.getLanguages=function(){return qTranslateConfig.language_config},this.getFlagLocation=function(){return qTranslateConfig.flag_location},this.isLanguageEnabled=function(n){return!!qTranslateConfig.language_config[n]},setLangCookie=function(n){document.cookie="qtrans_edit_language="+n},qTranslateConfig.activeLanguage,qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&this.isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,this.isLanguageEnabled(qTranslateConfig.activeLanguage)?setLangCookie(qTranslateConfig.activeLanguage):qTranslateConfig.LSB=!1)):(qTranslateConfig.activeLanguage=qTranslateConfig.language,setLangCookie(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage},this.getLanguages=function(){return qTranslateConfig.language_config};var e={},a=0;updateFusedValueH=function(n,a){var t=e[n],i=a.trim();t.fields[t.lang].value=i},addContentHook=function(n,t,i){if(!n)return!1;if(!n.name)return!1;switch(n.tagName){case"TEXTAREA":case"INPUT":break;default:return!1}if(n.id||(n.id=n.tagName,t.id&&(n.id+=t.id),n.id+=n.name,n.name>2&&n.name.lastIndexOf("[]")==n.name.length-2&&(n.id+=++a)),e[n.id])return!0;var o=e[n.id]={};o.name=n.name,o.contentField=n,o.lang=qTranslateConfig.activeLanguage;var r=qtranxj_split(n.value);n.value=r[o.lang];var s,l,g=o.name.indexOf("[");if(0>g)s="qtranslate-fields["+o.name+"]";else if(s="qtranslate-fields["+o.name.substring(0,g)+"]",o.name.lastIndexOf("[]")<0)s+=o.name.substring(g);else{var c=o.name.length-2;c>g&&(s+=o.name.substring(g,c)),l="[]"}o.fields={};for(var f in r){var d=r[f],u=s+"["+f+"]";l&&(u+=l);var h=qtranxj_ce("input",{name:u,type:"hidden",className:"hidden",value:d});o.fields[f]=h,n.parentNode.insertBefore(h,n)}return i||(i="["),o.sepfield=qtranxj_ce("input",{name:s+"[qtranslate-separator]",type:"hidden",className:"hidden",value:i}),n.parentNode.insertBefore(o.sepfield,n),o.separator=i,n.className+=" qtranxs-translatable",o},this.addContentHookC=function(n,e){return addContentHook(n,e,"[")},this.addContentHookB=function(n,e){return addContentHook(n,e,"[")},this.addContentHookById=function(n,e,a){return addContentHook(this.ge(n),e,a)},this.addContentHookByIdName=function(n,e){var a;switch(n[0]){case"<":case"[":a=n.substring(0,1),n=n.substring(1)}return this.addContentHookById(n,e,a)},this.addContentHookByIdC=function(n,e){return this.addContentHookById(n,e,"[")},this.addContentHookByIdB=function(n,e){return this.addContentHookById(n,e,"[")},this.removeContentHook=function(n){if(!n)return!1;if(!n.id)return!1;if(!e[n.id])return!1;var a=e[n.id];a.sepfield&&jQuery(a.sepfield).remove();for(var t in a.fields)jQuery(a.fields[t]).remove();return jQuery(n).removeClass("qtranxs-translatable"),delete e[n.id],!0};var t=[];addDisplayHookNode=function(n){if(!n.nodeValue)return 0;var e=qtranxj_get_split_blocks(n.nodeValue);if(!e||!e.length||1==e.length)return 0;var a={};return a.nd=n,a.contents=qtranxj_split_blocks(e),n.nodeValue=a.contents[qTranslateConfig.activeLanguage],t.push(a),1};var i=[];if(addDisplayHookAttr=function(n){if(!n.value)return 0;var e=qtranxj_get_split_blocks(n.value);if(!e||!e.length||1==e.length)return 0;var a={};return a.nd=n,a.contents=qtranxj_split_blocks(e),n.value=a.contents[qTranslateConfig.activeLanguage],i.push(a),1},addDisplayHook=function(n){if(!n||!n.tagName)return 0;switch(n.tagName){case"TEXTAREA":return 0;case"INPUT":switch(n.type){case"submit":if(n.value)return addDisplayHookAttr(n);default:return 0}}var e=0;if(n.childNodes&&n.childNodes.length)for(var a=0;a<n.childNodes.length;++a){var t=n.childNodes[a];switch(t.nodeType){case 1:e+=addDisplayHook(t);break;case 2:case 3:e+=addDisplayHookNode(t)}}return e},this.addDisplayHookById=function(n){return addDisplayHook(this.ge(n))},updateTinyMCE=function(n){text=n.contentField.value,n.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),n.mce.setContent(text,{format:"html"})},onTabSwitch=function(n){setLangCookie(n);for(var a=0;a<t.length;++a){var o=t[a];o.nd.nodeValue=o.contents[n]}for(var a=0;a<i.length;++a){var o=i[a];o.nd.value=o.contents[n]}for(var r in e){var o=e[r],s=o.mce&&!o.mce.hidden;s&&o.mce.save({format:"html"}),o.fields[o.lang].value=o.contentField.value,o.lang=n;var l=o.fields[o.lang].value;o.contentField.placeholder&&""!=l&&(o.contentField.placeholder=""),o.contentField.value=l,s&&updateTinyMCE(o)}},qTranslateConfig.qtx=this,addDisplayHooks=function(n){for(var e=0;e<n.length;++e){var a=n[e];addDisplayHook(a)}},this.addDisplayHooksByClass=function(n,e){var a=e.getElementsByClassName(n);addDisplayHooks(a)},this.addDisplayHooksByTagInClass=function(n,e,a){for(var t=a.getElementsByClassName(n),i=0;i<t.length;++i){var o=t[i],r=o.getElementsByTagName(e);addDisplayHooks(r)}},addContentFieldHooks=function(n,e,a){for(var t=0;t<n.length;++t){var i=n[t];addContentHook(i,e,a)}},addContentHooksByClassName=function(n,e,a,t){a||(a=e);var i=a.getElementsByClassName(n);addContentFieldHooks(i,e,t)},this.addContentHooksByClass=function(n,e,a){var t;(0==n.indexOf("<")||0==n.indexOf("["))&&(t=n.substring(0,1),n=n.substring(1)),addContentHooksByClassName(n,e,a,t)},this.addCustomContentHooks=function(n){for(var e=0;e<qTranslateConfig.custom_fields.length;++e){var a=qTranslateConfig.custom_fields[e];this.addContentHookByIdName(a,n)}for(var e=0;e<qTranslateConfig.custom_field_classes.length;++e){var a=qTranslateConfig.custom_field_classes[e];this.addContentHooksByClass(a,n)}},this.addPageHooks=function(n){for(var e=0;e<n.length;++e){var a,t=n[e];if(t.form){if(t.form.id)a=document.getElementById(t.form.id);else if(t.form.jquery)a=$(t.form.jquery);else if(t.form.name){var i=document.getElementsByName(t.form.name);i&&i.length&&(a=i[0])}}else a=this.getWrapForm();for(var o=0;o<t.fields.length;++o){var r=t.fields[o],s=[];if(r.container_id){var l=document.getElementById(r.container_id);l&&s.push(l)}else r.container_class?s=document.getElementsByClassName(r.container_class):a&&s.push(a);var g=r.encode;switch(g){case"display":if(r.id)addDisplayHook(document.getElementById(r.id));else if(r.class)for(var c=0;c<s.length;++c)for(var l=s[c],f=l.getElementsByClassName(r.class),d=0;d<f.length;++d){var u=f[d];r.tag&&r.tag!=u.tagName||addDisplayHook(u)}else{if(!r.tag)continue;for(var c=0;c<s.length;++c){var l=s[c],h=l.getElementsByTagName(r.tag);addDisplayHooks(h)}}break;case"[":case"<":case"byline":default:if(!a)continue;if(r.id)this.addContentHookById(r.id,a,g);else if(r.class)for(var c=0;c<s.length;++c)for(var l=s[c],f=l.getElementsByClassName(r.class),d=0;d<f.length;++d){var u=f[d];r.tag&&r.tag!=u.tagName||(!r.name||u.name&&r.name==u.name)&&addContentHook(u,a,g)}else{if(!r.tag)continue;for(var c=0;c<s.length;++c)for(var l=s[c],f=l.getElementsByTagName(r.tag),d=0;d<f.length;++d){var u=f[d];(!r.name||u.name&&r.name==u.name)&&addContentHook(u,a,g)}}}}}},this.addContentHooksTinyMCE=function(){function n(n){var a=n.id;if(a){var t=e[a];if(t&&!t.mce){t.mce=n,n.getContainer().className+=" qtranxs-translatable",n.getElement().className+=" qtranxs-translatable";var i=t.updateTinyMCEonInit;if(null==i){var o=n.getContent({format:"html"}).replace(/\s+/g,""),r=t.contentField.value.replace(/\s+/g,"");i=o!=r}return i&&updateTinyMCE(t),t}}}setTinyMceInit=function(){if(window.tinyMCE)for(var a in e){var t=e[a];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[a]){if(t.mceInit=tinyMCEPreInit.mceInit[a],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var i=tinymce.DOM.select("#wp-"+a+"-wrap");i&&i.length&&(t.wrapper=i[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[a].init_instance_callback=function(e){n(e)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE)for(var e=0;e<tinyMCE.editors.length;++e){var a=tinyMCE.editors[e];n(a)}},window.addEventListener("load",loadTinyMceHooks)},qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(n){qTranslateConfig.onTabSwitchFunctions.push(n)},this.addLanguageSwitchBeforeListener=function(n){qTranslateConfig.onTabSwitchFunctionsSave.push(n)},this.addLanguageSwitchAfterListener=function(n){qTranslateConfig.onTabSwitchFunctionsLoad.push(n)},this.enableLanguageSwitchingButtons=function(n){var e=n?"block":"none";for(var a in qTranslateConfig.tabSwitches){for(var t=qTranslateConfig.tabSwitches[a],i=0;i<t.length;++i){var o=(t[i],t[i].parentElement);o.style.display=e;break}break}},this.getWrapForm=function(){for(var n=document.getElementsByClassName("wrap"),e=0;e<n.length;++e){var a=n[e],t=a.getElementsByTagName("form");if(t.length)return t[0]}var t=document.getElementsByTagName("form");if(1===t.length)return t[0];for(var e=0;e<t.length;++e){var i=t[e];if(n=i.getElementsByClassName("wrap"),n.length)return i}return null},this.getFormWrap=function(){for(var n=document.getElementsByTagName("form"),e=0;e<n.length;++e){var a=n[e],t=a.getElementsByClassName("wrap");if(t.length)return t[0]}for(var t=document.getElementsByClassName("wrap"),e=0;e<t.length;++e){var i=t[e];if(n=i.getElementsByTagName("form"),n.length)return i}return null},"function"==typeof n.addContentHooks&&n.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&this.addPageHooks(qTranslateConfig.page_config.forms),!t.length&&!i.length){var o=!1;for(var r in e){o=!0;break}if(!o)return}if(qTranslateConfig.LSB){var s=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var l=0;l<qTranslateConfig.page_config.anchors.length;++l){var g=qTranslateConfig.page_config.anchors[l],c=document.getElementById(g);c&&s.push(c)}if(!s.length){var c=n.langSwitchWrapAnchor;c||(c=this.getWrapForm()),c||(c=this.getWrapForm()),c&&s.push(c)}for(var l=0;l<s.length;++l){var g=s[l],f=qtranxj_ce("ul",{className:qTranslateConfig.lsb_style_wrap_class});g.parentNode.insertBefore(f,g);{new qtranxj_LanguageSwitch(f)}}this.addLanguageSwitchListener(onTabSwitch),n.onTabSwitch&&this.addLanguageSwitchListener(n.onTabSwitch)}};jQuery(document).ready(function(){new qTranslateX(qTranslateConfig.js)});